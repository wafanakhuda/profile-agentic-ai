# üöÄ Render Deployment Guide

## Prerequisites
- GitHub account
- Render account (sign up at https://render.com)
- Your code pushed to GitHub repository

## üìù Step-by-Step Deployment

### 1. Push Code to GitHub

```bash
cd /app
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO.git
git push -u origin main
```

### 2. Create New Web Service on Render

1. Go to https://dashboard.render.com
2. Click **"New +"** ‚Üí **"Web Service"**
3. Connect your GitHub repository
4. Select your repository

### 3. Configure Build Settings

**Service Name:** `student-profile-agent` (or any name you prefer)

**Environment:** `Node`

**Region:** Choose closest to you (e.g., Oregon, Frankfurt, Singapore)

**Branch:** `main` (or your default branch)

**Build Command:**
```bash
yarn install && pip install -r requirements.txt
```

**Start Command:**
```bash
npm start
```

**Plan:** Select **Starter** ($7/month) or **Free** (with limitations)

### 4. Add Environment Variables

Click **"Advanced"** ‚Üí **"Add Environment Variable"**

Add these one by one:

| Key | Value |
|-----|-------|
| `ANTHROPIC_API_KEY` | `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` |
| `GMAIL_USER` | `wafanakhuda@gmail.com` |
| `GMAIL_APP_PASSWORD` | `dtxjxevqnhzlhzxn` |
| `FROM_EMAIL` | `noreply@iiitd.ac.in` |
| `FROM_NAME` | `IIIT Dharwad` |
| `GOOGLE_FORM_URL` | `https://forms.gle/AFNpAnnS9aWURoQj9` |
| `NODE_ENV` | `production` |

**Note:** `NEXT_PUBLIC_BASE_URL` will be auto-generated by Render

### 5. Deploy

1. Click **"Create Web Service"**
2. Wait for build to complete (5-10 minutes)
3. Render will provide you a URL like: `https://student-profile-agent.onrender.com`

### 6. Post-Deployment

**Update Environment Variable:**
- Go to your service ‚Üí Environment
- Add: `NEXT_PUBLIC_BASE_URL` = `https://your-app-name.onrender.com`
- Click **"Save Changes"**

## ‚ö†Ô∏è Important Notes

### Free Tier Limitations:
- Service spins down after 15 minutes of inactivity
- First request after spin-down takes 50+ seconds
- 750 hours/month free

### Paid Tier Benefits ($7/month):
- Always running (no spin-down)
- Faster performance
- More resources

### File Storage:
- Render uses ephemeral storage
- Uploaded files and `nudge_history.json` will be deleted on restart
- Consider using:
  - MongoDB Atlas (free tier) for nudge tracking
  - AWS S3/Cloudinary for file uploads

## üîß Troubleshooting

### Build Fails:
- Check Python version in `runtime.txt` (if needed)
- Verify all dependencies in `requirements.txt` and `package.json`

### Python Scripts Not Running:
- Ensure Python path is correct in API routes
- Check: `/opt/render/project/src/.venv/bin/python3`

### Environment Variables Not Working:
- Double-check all values are correctly copied
- No extra spaces in values
- Restart service after adding variables

## üìä Monitor Your App

**Render Dashboard provides:**
- Real-time logs
- Metrics (CPU, Memory)
- Deploy history
- Health checks

**Access Logs:**
- Dashboard ‚Üí Your Service ‚Üí Logs
- View Python agent execution
- Debug email sending issues

## üîÑ Updates & Redeployment

**Automatic Deployments:**
- Push to GitHub ‚Üí Render auto-deploys
- Monitor progress in dashboard

**Manual Deploy:**
- Dashboard ‚Üí Your Service ‚Üí Manual Deploy ‚Üí Deploy latest commit

## üåê Custom Domain (Optional)

1. Go to Service Settings ‚Üí Custom Domains
2. Add your domain
3. Update DNS records as instructed
4. Wait for SSL certificate (automatic)

## üìû Support

**Render Issues:**
- https://render.com/docs
- Community: https://community.render.com

**App Issues:**
- Check logs in Render Dashboard
- Verify environment variables
- Test locally first

---

## ‚úÖ Quick Checklist

- [ ] Code pushed to GitHub
- [ ] Render account created
- [ ] Repository connected to Render
- [ ] Build command configured
- [ ] Start command configured
- [ ] All environment variables added
- [ ] Service deployed successfully
- [ ] App accessible via Render URL
- [ ] Test file upload
- [ ] Test AI agent execution
- [ ] Test email sending

---

**Your app should now be live! üéâ**

Visit: `https://your-app-name.onrender.com`
